# Core Architecture Setup

## Frontmatter

```yaml
name: Core Architecture Setup
status: pending
created: 2025-08-29T20:11:17Z
updated: 2025-08-29T20:22:17Z
github: https://github.com/AHartNtkn/npr-proof-assistant/issues/13
depends_on: []
parallel: true
conflicts_with: []
```

## Description

Set up the foundational architecture for the NPR Proof Assistant web application. This includes establishing the TypeScript/React development environment, configuring high-performance WebGL rendering, implementing the dual-mode state machine that distinguishes between formula building and proof construction, and setting up efficient state management.

The architecture must support the core principle that "graphs ARE formulas" - the diagrams are the actual syntax, not representations of formulas. This requires a robust foundation that can handle complex graph manipulations with smooth, responsive interactions.

## Acceptance Criteria

- [ ] TypeScript/React project bootstrapped with Vite
- [ ] WebGL canvas rendering configured with either PixiJS or Three.js
- [ ] Dual-mode state machine implemented (Formula Mode vs Proof Mode)
- [ ] Zustand store configured for state management
- [ ] Basic project structure established with clear separation of concerns
- [ ] Hot module reloading working for rapid development
- [ ] Type checking configured and passing
- [ ] Build system configured and producing optimized bundles

## Technical Details

### Development Environment
- **Framework**: React 18+ with TypeScript
- **Build Tool**: Vite for fast development and optimized builds
- **Package Manager**: npm or yarn (consistent with existing setup)

### Rendering Engine
Choose between:
- **PixiJS**: Excellent for 2D graphics, WebGL acceleration, mature ecosystem
- **Three.js**: More powerful for 3D but might be overkill, larger bundle

### State Architecture
- **Primary Store**: Zustand for lightweight, TypeScript-friendly state management
- **State Shape**: Separate slices for formula mode, proof mode, and shared UI state
- **Mode Management**: Finite state machine to prevent invalid state transitions

### Project Structure
```
src/
├── components/     # React components
├── stores/         # Zustand stores
├── engine/         # Core graph engine (prepared for task 002)
├── modes/          # Mode-specific logic
├── types/          # TypeScript type definitions
└── utils/          # Utility functions
```

## Dependencies

No dependencies on other tasks. This is the foundational task that enables all subsequent development.

## Effort Estimate

**Medium (M)** - 16 hours

## Definition of Done

- Project builds without errors or warnings
- Hot reloading works correctly
- State management demonstrates both modes with proper transitions
- WebGL canvas renders basic shapes or placeholder content
- Code passes TypeScript strict mode checking
- Documentation exists for project setup and architecture decisions
- All acceptance criteria are met and verified
